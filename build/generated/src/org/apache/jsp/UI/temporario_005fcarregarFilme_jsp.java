package org.apache.jsp.UI;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class temporario_005fcarregarFilme_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html lang=\"en\" >\n");
      out.write("\n");
      out.write("<head>\n");
      out.write("\n");
      out.write("  <meta charset=\"UTF-8\">\n");
      out.write("  \n");
      out.write("<link rel=\"apple-touch-icon\" type=\"image/png\" href=\"https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png\" />\n");
      out.write("<meta name=\"apple-mobile-web-app-title\" content=\"CodePen\">\n");
      out.write("\n");
      out.write("<link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico\" />\n");
      out.write("\n");
      out.write("<link rel=\"mask-icon\" type=\"\" href=\"https://cpwebassets.codepen.io/assets/favicon/logo-pin-8f3771b1072e3c38bd662872f6b673a722f4b3ca2421637d5596661b4e2132cc.svg\" color=\"#111\" />\n");
      out.write("\n");
      out.write("\n");
      out.write("  <title>CodePen - Movie Finder</title>\n");
      out.write("  \n");
      out.write("  \n");
      out.write("  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css'>\n");
      out.write("  \n");
      out.write("<style>\n");
      out.write(":root {\n");
      out.write("  --color1: #708ed2;\n");
      out.write("  --color2: #272532;\n");
      out.write("  --color3: #ebe5e2;\n");
      out.write("  --color4: #83cfdf;\n");
      out.write("  --color5: #13688c;\n");
      out.write("  --color6: #373b69;\n");
      out.write("}\n");
      out.write("\n");
      out.write("html,\n");
      out.write("body {\n");
      out.write("  height: 100%;\n");
      out.write("}\n");
      out.write("\n");
      out.write("body {\n");
      out.write("  background: var(--color6) !important;\n");
      out.write("}\n");
      out.write("\n");
      out.write("nav {\n");
      out.write("  background: #6065ac;\n");
      out.write("}\n");
      out.write("nav a {\n");
      out.write("  color: #ebe5e2;\n");
      out.write("  font-size: 2.5rem !important;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".movie-card {\n");
      out.write("  padding: 10px;\n");
      out.write("}\n");
      out.write(".movie-description {\n");
      out.write("  background: var(--color5);\n");
      out.write("  border-radius: 0 0 0.5rem 0.5rem;\n");
      out.write("}\n");
      out.write(".movie-title {\n");
      out.write("  color: var(--color3);\n");
      out.write("  padding: 0.5rem;\n");
      out.write("  font-size: 1rem;\n");
      out.write("}\n");
      out.write(".movie-vote {\n");
      out.write("  background: var(--color2);\n");
      out.write("  color: orange;\n");
      out.write("  text-align: center;\n");
      out.write("  padding: 0.5rem;\n");
      out.write("  border-radius: 0.5rem;\n");
      out.write("}\n");
      out.write(".movie-img {\n");
      out.write("  border-radius: 0.5rem 0.5rem 0 0;\n");
      out.write("  overflow: hidden;\n");
      out.write("  max-height: 100% !important;\n");
      out.write("}\n");
      out.write("</style>\n");
      out.write("\n");
      out.write("  <script>\n");
      out.write("  window.console = window.console || function(t) {};\n");
      out.write("</script>\n");
      out.write("\n");
      out.write("  \n");
      out.write("  \n");
      out.write("  <script>\n");
      out.write("  if (document.location.search.match(/type=embed/gi)) {\n");
      out.write("    window.parent.postMessage(\"resize\", \"*\");\n");
      out.write("  }\n");
      out.write("</script>\n");
      out.write("\n");
      out.write("\n");
      out.write("</head>\n");
      out.write("\n");
      out.write("<body translate=\"no\" >\n");
      out.write("  <nav class=\"fixed-top d-flex justify-content-center navbar p-2\">\n");
      out.write("      <a href=\"index.html\" class=\"p-0 navbar-brand d-none d-lg-block\"\n");
      out.write("        >Movie Finder</a\n");
      out.write("      >\n");
      out.write("      <form id=\"search-form\" class=\"form-inline\">\n");
      out.write("        <input\n");
      out.write("          id=\"search\"\n");
      out.write("          class=\"form-control mr-sm-2\"\n");
      out.write("          type=\"search\"\n");
      out.write("          placeholder=\"Search\"\n");
      out.write("          aria-label=\"Search\"\n");
      out.write("        />\n");
      out.write("      </form>\n");
      out.write("    </nav>\n");
      out.write("    <section>\n");
      out.write("      <div class=\"container-fluid mt-5 p-5\">\n");
      out.write("        <div id=\"movie-content\" class=\"row d-flex justify-content-center\">\n");
      out.write("          <!-- javascript will come here -->\n");
      out.write("        </div>\n");
      out.write("      </div>\n");
      out.write("    </section>\n");
      out.write("    <nav aria-label=\"Page navigation example\">\n");
      out.write("      <ul class=\"pagination justify-content-center\">\n");
      out.write("        <li class=\"page-item\">\n");
      out.write("          <a id=\"previous\" class=\"btn page-link\" tabindex=\"-1\">Previous</a>\n");
      out.write("        </li>\n");
      out.write("        <li class=\"page-item\">\n");
      out.write("          <a id=\"next\" class=\"btn page-link\">Next</a>\n");
      out.write("        </li>\n");
      out.write("      </ul>\n");
      out.write("    </nav>\n");
      out.write("    <script src=\"https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-1b93190375e9ccc259df3a57c1abc0e64599724ae30d7ea4c6877eb615f89387.js\"></script>\n");
      out.write("\n");
      out.write("  \n");
      out.write("      <script id=\"rendered-js\" >\n");
      out.write("const API_KEY = \"249f222afb1002186f4d88b2b5418b55\";\n");
      out.write("\n");
      out.write("const API_SEARCH = `https://api.themoviedb.org/3/search/movie?api_key=");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${API_KEY}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("&language=en-US&query=`;\n");
      out.write("\n");
      out.write("const IMAGE_PATH = \"https://image.tmdb.org/t/p/w500\";\n");
      out.write("\n");
      out.write("let page = \"1\";\n");
      out.write("\n");
      out.write("const API_URL = `https://api.themoviedb.org/3/discover/movie?api_key=");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${API_KEY}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("&language=en-US&sort_by=popularity.desc&include_video=true&page=`;\n");
      out.write("\n");
      out.write("const mainContent = document.getElementById(\"movie-content\");\n");
      out.write("// search form elements\n");
      out.write("const form = document.getElementById(\"search-form\");\n");
      out.write("const search = document.getElementById(\"search\");\n");
      out.write("// pagination elements\n");
      out.write("const pageLinks = document.querySelectorAll(\".page-link\");\n");
      out.write("console.log(pageLinks);\n");
      out.write("\n");
      out.write("// initially get the most popular movies list's first page\n");
      out.write("getMovies(API_URL + page);\n");
      out.write("\n");
      out.write("// previous and next page\n");
      out.write("pageLinks.forEach(pageLink => {\n");
      out.write("  pageLink.addEventListener(\"click\", () => {\n");
      out.write("    if (pageLink.id === \"next\") {\n");
      out.write("      page++;\n");
      out.write("      getMovies(API_URL + page);\n");
      out.write("    }\n");
      out.write("    if (pageLink.id === \"previous\" && page > 1) {\n");
      out.write("      page--;\n");
      out.write("      getMovies(API_URL + page);\n");
      out.write("    }\n");
      out.write("  });\n");
      out.write("});\n");
      out.write("\n");
      out.write("// search for a movie\n");
      out.write("form.addEventListener(\"submit\", e => {\n");
      out.write("  e.preventDefault();\n");
      out.write("  console.log(search.value);\n");
      out.write("  const query = search.value;\n");
      out.write("  if (query) {\n");
      out.write("    getMovies(API_SEARCH + query);\n");
      out.write("  }\n");
      out.write("});\n");
      out.write("\n");
      out.write("async function getMovies(url) {\n");
      out.write("  const resp = await fetch(url);\n");
      out.write("  const respData = await resp.json();\n");
      out.write("  console.log(respData);\n");
      out.write("  console.log(respData.total_pages);\n");
      out.write("  showMovies(respData.results);\n");
      out.write("}\n");
      out.write("\n");
      out.write("function showMovies(movies) {\n");
      out.write("  mainContent.innerHTML = \"\";\n");
      out.write("  movies.forEach(movie => {\n");
      out.write("    const movieTitle = movie.title;\n");
      out.write("    const moviePoster = movie.poster_path;\n");
      out.write("    const movieVote = movie.vote_average;\n");
      out.write("    const movieElm = document.createElement(\"div\");\n");
      out.write("    movieElm.classList.add(\n");
      out.write("    \"col-xs-12\",\n");
      out.write("    \"col-sm-6\",\n");
      out.write("    \"col-md-4\",\n");
      out.write("    \"col-lg-3\",\n");
      out.write("    \"p-0\");\n");
      out.write("    \n");
      out.write("    \n");
      out.write("\n");
      out.write("    movieElm.innerHTML = `\n");
      out.write("    <div class=\"movie-card\">\n");
      out.write("              <img\n");
      out.write("                class=\"img-fluid movie-img\"\n");
      out.write("                src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${IMAGE_PATH}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${moviePoster}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("\"\n");
      out.write("                onError=\"this.onerror=null;this.src='https://i.ebayimg.com/images/g/1EMAAMXQdGJR2-n3/s-l1600.jpg';\"\n");
      out.write("                alt=\"Sorry, something went wrong\"\n");
      out.write("              />\n");
      out.write("              <div\n");
      out.write("                class=\"movie-description p-3 d-flex justify-content-between align-items-center\"\n");
      out.write("              >\n");
      out.write("                <h3 class=\"movie-title\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${movieTitle}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("</h3>\n");
      out.write("                <h3 class=\"movie-vote\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${movieVote}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("</h3>\n");
      out.write("              </div>\n");
      out.write("            </div>\n");
      out.write("    `;\n");
      out.write("    mainContent.appendChild(movieElm);\n");
      out.write("    \n");
      out.write("    <script>\n");
      out.write("    $(document).ready(function(){\n");
      out.write("    $.ajax({\n");
      out.write("   type : \"POST\",\n");
      out.write("   url: \"http://localhost:8080/ASA/addMovie_DB\",\n");
      out.write("   data: {src: \"moviePoster\",\n");
      out.write("          title: \"movieTitle\",\n");
      out.write("          rate: \"movieVote\"}\n");
      out.write("          });\n");
      out.write("          });\n");
      out.write("</script>\n");
      out.write("  \n");
      out.write("  \n");
      out.write("  \n");
      out.write("}\n");
      out.write("//# sourceURL=pen.js\n");
      out.write("    </script>\n");
      out.write("\n");
      out.write("  \n");
      out.write("\n");
      out.write("</body>\n");
      out.write("\n");
      out.write("</html>\n");
      out.write(" \n");
      out.write("\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
